---
title: "유니티 모바일게임 포트폴리오"
categories: 
  - Portfolio
last_modified_at: 2019-12-12T13:00:00+09:00
toc: true
sidebar_main: true
---


***

# 프로젝트 소개

***

![1](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/intro.png?raw=true)

유니티 엔진을 이용해 제작한 모바일 방치형 RPG게임입니다. 

> 사용 엔진

유니티 엔진 2019.2.2f1

> 플랫폼

모바일 (안드로이드)

> 장르 

방치형 RPG 게임

> 개발 기간

5주

***


# 개발 과정

## 플레이어 캐릭터 구성

> 캐릭터 상태

![4](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/4.png?raw=true)

플레이어나 몬스터의 상태의 기반이 되는 `StateBase` 클래스를 만들고 이를 상속받고 저장된 캐릭터 정보를 불러와 스텟을 설정하거나 데미지처리등의 메서드를 오버라이드 했습니다. 


> 캐릭터 이동

![3](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/3.png?raw=true)

![4](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/6.png?raw=true)

캐릭터의 이동은 터치를 통한 레이캐스트를 이용해 충돌한 지점을 `NavMesh Agent`를 통해 이동가능한 최단경로로 이동하도록 했습니다.

> 캐릭터 공격

![7](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/7.png?raw=true)

캐릭터의 공격 스크립트에서는 컬리전을 통해 주변 몬스터의 `StateBase` 클래스를 배열에 저장하고 캐릭터의 상태가 이동상태가 아닐때 가장 가까운적을 향해 데미지 메서드를 실행시키면서 `Line Renderer`와 `Particle`을 재생 시켜 공격하도록 했습니다.

## 몬스터 구성

> 몬스터 상태

![8](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/8.png?raw=true)

몬스터도 캐릭터와 같이 StateBase를 기반으로 상태를 가지며 컬리전을 통해 주변 플레이어를 탐지하여 공격범위 안에 들때까지 쫓아오도록 구성했습니다. 

또한 새로운 Depth only 카메라를 통해 체력바 Prefab을 합성하여 몬스터 오브젝트 위에 체력바를 표시하도록 구성했습니다.


> 몬스터 스폰

![9](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/9.png?raw=true)

몬스터는 계속해서 스폰되어야 하기때문에 계속해서 생성/삭제를 반복하여 메모리부하를 주는 것 보다 미리 필요한 만큼 생성하여 활성화/비활성화 해주는 오브젝트풀링 방식을 사용했습니다. 

몬스터의 스폰은 MonsterSpawner 클래스를 통해 관리하며
미리 몬스터 오브젝트들을 생성 해놓은뒤 큐에 삽입한다음 큐에 남아있는 오브젝트를 일정시간마다 꺼내어 활성화 시키는 방법으로 구성했습니다.

몬스터가 사망하면 다시 큐에 넣어지고 큐에서 꺼내어 다시 활성화될 때 초기 상태로 설정하도록 했습니다. 


## AI 구성

![drone](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/drone2.png?raw=true)

캐릭터 주변을 따라다니며 치료하거나 전투를 돕는 AI를 구성했습니다.

![drone](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/drone.png?raw=true)

`Update`문에서 초당 수십번 실행되는것 대신 코루틴을 이용하여 연산에대한 부하를 줄였습니다.


## UI 구성

![10](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/10.png?raw=true)


![11](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/mainui.png?raw=true)

UI는 유니티의 `UGUI`를 이용하여 구성했으며 각 씬마다 UI를 관리하는 `Manager` 클래스를 통해 창을 띄우거나 텍스트를 변경하는 작업을 관리하도록 구성했습니다.


## 데이터 관리

> 데이터 저장

![data](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/prefs.png?raw=true)

플레이에 필요한 데이터는 `DataManager`를 통해 관리하며 유니티의 `PlayerPrefs`로 저장한다음 조작방지를 위해 별도의 암호화를 거쳐 저장하도록 했습니다. 

DataManager는 `싱글턴 패턴`을 통해 다른 클래스에서 쉽게 데이터를 저장하고 불러오도록 했습니다.


> 클라우드 저장

![cloud](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/cloud.png?raw=true)

저장된 데이터를 `JSON` 형식으로 만들고 구글 `GPGS`를 통해 클라우드에 저장하고 불러올 수 있도록 했습니다.

## 스토어 출시

![store](https://github.com/lesslate/lesslate.github.io/blob/master/assets/img/Portfolio/marine/store.png?raw=true)

구글 플레이 스토어에 앱을 출시하여 피드백받아 꾸준히 업데이트하고 있습니다.


# 플레이 영상


> 플레이 영상

<iframe width="560" height="315" src="https://www.youtube.com/embed/S9aZafWj1aw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

# 스토어 주소

[https://play.google.com/store/apps/details?id=com.slate.spacemarine](https://play.google.com/store/apps/details?id=com.slate.spacemarine)